# PropIntel

**Property Intelligence & Execution Platform**

![TypeScript](https://img.shields.io/badge/TypeScript-strict-blue?logo=typescript)
![Next.js](https://img.shields.io/badge/Next.js-16-black?logo=next.js)
![Prisma](https://img.shields.io/badge/Prisma-7-2D3748?logo=prisma)
![Supabase](https://img.shields.io/badge/Supabase-Auth%20%2B%20Storage-3ECF8E?logo=supabase)
![License](https://img.shields.io/badge/License-MIT-green)

---

## The Problem

The home inspection industry runs on PDFs. A 50-page report lands in a homeowner's inbox, full of jargon, and nothing actionable happens. Contractors never see the data. Homeowners don't know what to fix first. Inspectors move on to the next job. The data dies in a PDF.

**The gap:** There is no system of record that connects *what's wrong with a house* to *who will fix it* and *at what price* — with trust and transparency at every step.

## The Solution

PropIntel treats the home inspection as a **structured data event**, not a document. Observations become standardized issues. Issues become scoped projects. Projects attract contractor bids. Every piece of data traces back to a photo-backed observation.

```
┌─────────────────────────────────────────────────────────────┐
│                     DATA CAPTURE                             │
│  Inspector → Observations (photo + status + severity)        │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│                 RULES ENGINE                                 │
│  DefectDictionary lookup → Normalized Issues                 │
│  (component + condition → MasterFormat code + trade)         │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│              ROLE-BASED VIEWS                                │
│  Homeowner: plain-language issues, safety flags              │
│  Contractor: trade-matched scope items with specs            │
│  Admin: review queues, user management                       │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       ▼
┌─────────────────────────────────────────────────────────────┐
│             EXECUTION WORKFLOWS                              │
│  Project → Scope Items → Proposals → Contractor Selection    │
└─────────────────────────────────────────────────────────────┘
```

## Key Features

### Four Role Dashboards
- **Inspector** — Capture observations in the field with photo-first workflow, section-based navigation, and AI-assisted analysis
- **Homeowner** — See your home's condition in plain language, track safety hazards, manage properties and projects
- **Contractor** — Receive trade-matched scope items, submit line-item proposals backed by inspection data
- **Admin** — Review inspections, verify contractors, manage users, monitor platform activity

### Rules Engine
Observations are normalized into issues using the **DefectDictionary** — a lookup table mapping (section + component + condition) to standardized issues with MasterFormat codes, trade categories, and severity levels. No hardcoded rules in application logic.

### AI Vision Analysis
Inspectors can optionally use **AI-powered photo analysis** (Claude Sonnet) to pre-fill observation fields. The AI identifies the component, assesses condition and severity, and generates homeowner-friendly descriptions — all editable before saving.

### Industry Standards
- **CSI MasterFormat** — Trade mapping on issues and contractor profiles
- **InterNACHI/ASHI** — Observation presets, severity definitions, defect dictionary seeds
- **RESO Data Dictionary 2.0** — Property field naming conventions

## Tech Stack

| Layer | Technology |
|-------|-----------|
| Framework | Next.js 16 (App Router, Turbopack) |
| Language | TypeScript (strict mode) |
| Database | PostgreSQL via Supabase |
| ORM | Prisma 7 |
| Auth | Supabase Auth (email/password) |
| Storage | Supabase Storage |
| AI | Anthropic Claude API (Vision) |
| UI | Tailwind CSS 4 + shadcn/ui |
| Deployment | Vercel |

## Data Model

```
User (HOMEOWNER | INSPECTOR | CONTRACTOR | ADMIN)
  └── Property
       ├── Inspection
       │    ├── Section (from SectionTemplate)
       │    │    └── Observation (status + severity + media)
       │    └── Issue (generated by Rules Engine)
       └── Project
            ├── ScopeItem (issue + homeowner intent)
            │    └── ScopeSnapshot (immutable for bidding)
            └── Proposal (contractor bid)
                 └── ProposalItem (line-item cost)
```

17 models, fully relational. Every table has `created_at` and `updated_at`. UUIDs throughout.

## Getting Started

### Prerequisites
- Node.js 18+
- PostgreSQL database (Supabase recommended)
- Anthropic API key (optional, for AI features)

### Environment Variables

Create a `.env` file:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
DATABASE_URL=your_pooled_connection_string
DIRECT_URL=your_direct_connection_string
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
ANTHROPIC_API_KEY=your_anthropic_key          # Optional — enables AI Vision
```

### Setup

```bash
# Install dependencies
npm install

# Generate Prisma client
npx prisma generate

# Run database migrations
npx prisma migrate deploy

# Seed section templates + defect dictionary
npx prisma db seed

# (Optional) Seed full demo flow — requires SUPABASE_SERVICE_ROLE_KEY
npm run seed:dev-flow

# Start development server
npm run dev
```

### Demo Accounts (after seed:dev-flow)

| Role | Email | Password |
|------|-------|----------|
| Admin | admin@propintel.dev | password123 |
| Inspector | inspector@propintel.dev | password123 |
| Homeowner | homeowner@propintel.dev | password123 |
| Contractor | contractor@propintel.dev | password123 |

The dev seed creates a complete flow: property at 456 Ocean Drive, WPB FL with a completed inspection (14 observations across 6 sections), 14 issues generated by the rules engine, a project in BIDDING status with 12 scope items, and a contractor proposal for $10,725.

## Project Structure

```
src/
├── app/
│   ├── (auth)/          # Login, signup, auth actions
│   ├── (dashboard)/     # All role dashboards
│   │   ├── admin/
│   │   ├── contractor/
│   │   ├── homeowner/
│   │   └── inspector/
│   ├── api/             # REST API routes
│   │   ├── ai/          # AI photo analysis
│   │   ├── admin/       # Admin endpoints
│   │   ├── contractor/  # Contractor endpoints
│   │   └── ...          # Inspections, observations, projects, etc.
│   └── auth/callback/   # OAuth callback
├── components/
│   ├── admin/           # Admin-specific components
│   ├── contractor/      # Contractor-specific components
│   ├── homeowner/       # Homeowner-specific components
│   ├── inspection/      # Inspection workspace components
│   ├── shared/          # DashboardShell, navigation
│   └── ui/              # shadcn/ui primitives
├── lib/
│   ├── rules-engine/    # DefectDictionary matcher + issue generator
│   ├── auth.ts          # Server-side auth helpers
│   ├── db.ts            # Prisma client singleton
│   └── storage.ts       # Supabase storage helpers
└── types/               # Shared TypeScript types
```

## Built with Claude Code

This entire platform — every component, API route, database schema, and seed file — was built using [Claude Code](https://claude.ai/claude-code), Anthropic's agentic coding tool. The architecture was designed by a human (see `ARCHITECTURE.md`), then Claude Code implemented it phase by phase:

1. **Schema & Foundation** — Prisma schema, database migrations, project scaffolding
2. **Inspector Dashboard** — Inspection workspace, observation forms, section navigation
3. **Homeowner Dashboard** — Property views, issue cards, project management
4. **Contractor Dashboard** — Profile management, proposal builder, trade matching
5. **Admin Dashboard** — Review queues, user management, platform stats
6. **Polish & Integration** — Auth flow, navigation, AI Vision, seeds, error states

The AI Vision feature uses Claude's own API — an inspector photographs a defect, and Claude analyzes it to pre-fill the observation form. AI helping humans build software that uses AI to help humans inspect homes.

## Geographic Context

Florida-first. Pool/Spa is a mandatory inspection section. Wind mitigation is included. Insurance relevance flags are part of the data model.

## License

MIT

---

**PropIntel** — From inspection to execution. Structured data, scoped projects, verified contractors, transparent pricing.
